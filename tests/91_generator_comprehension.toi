from lib.test import assert_eq

assert_eq(sum(x for x in 1..5), 15)
assert_eq(sum((x for x in 1..5)), 15)
assert_eq(sum(x * 2 for x in 1..5 if x > 2), 24)

g = (x * x for x in 1..4)
g2 = (x * x for x in 1..4)
assert_eq(type(g), "generator")
assert_eq(type(g2), "generator")
out = {}
for v in g
  out <+ v
assert_eq(#out, 4)
assert_eq(out[1], 1)
assert_eq(out[4], 16)

out2 = {}
for v in g2
  out2 <+ v
assert_eq(#out2, 4)
assert_eq(out2[1], 1)
assert_eq(out2[4], 16)

print "generator comprehension ok"
