fn assert_true(cond, msg = nil)
  if not cond
    error("assert_true failed")

fn assert_eq(actual, expected, msg = nil)
  if actual != expected
    error("assert_eq failed")

s = "hello world"
assert_true(s has "hello")
assert_true(s has "world")
assert_true(not (s has "nope"))

t = {1, 2, 3, a = 4, b = "x"}
assert_true(t has 2)
assert_true(t has 4)
assert_true(t has "x")
assert_true(not (t has 5))

mt = {}
mt.__has = fn(self, value)
  return value == 42

o = {}
setmetatable(o, mt)
assert_true(o has 42)
assert_true(not (o has 1))
