types = import lib.types

fn index(field, opts = nil)
  if type(field) != "string" or #field == 0
    error("records.index: field must be non-empty string")

  idx = {
    name = field,
    field = field,
    unique = false
  }

  if type(opts) == "table"
    for k, v in opts
      idx[k] = v
  return idx

return {
  index = index,
  Record = types.Record
}
